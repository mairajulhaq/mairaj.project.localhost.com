"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[150],{88484:function(G,j,e){e.d(j,{Z:function(){return c}});var u=e(1413),P=e(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},v=p,_=e(91146),a=function(M,A){return P.createElement(_.Z,(0,u.Z)((0,u.Z)({},M),{},{ref:A,icon:v}))},O=P.forwardRef(a),c=O},50335:function(G,j,e){e.d(j,{Z:function(){return S}});var u=e(1413),P=e(91),p=e(67294),v=e(66758),_=e(68256),a=e(85893),O=["proFieldProps","fieldProps"],c="date",x=p.forwardRef(function(n,E){var D=n.proFieldProps,h=n.fieldProps,l=(0,P.Z)(n,O),m=(0,p.useContext)(v.Z);return(0,a.jsx)(_.Z,(0,u.Z)({ref:E,valueType:c,fieldProps:(0,u.Z)({getPopupContainer:m.getPopupContainer},h),proFieldProps:D,filedConfig:{valueType:c,customLightMode:!0}},l))}),M=x,A=["proFieldProps","fieldProps"],B="dateMonth",R=p.forwardRef(function(n,E){var D=n.proFieldProps,h=n.fieldProps,l=(0,P.Z)(n,A),m=(0,p.useContext)(v.Z);return(0,a.jsx)(_.Z,(0,u.Z)({ref:E,valueType:B,fieldProps:(0,u.Z)({getPopupContainer:m.getPopupContainer},h),proFieldProps:D,filedConfig:{valueType:B,customLightMode:!0}},l))}),V=R,k=["fieldProps"],F="dateQuarter",H=p.forwardRef(function(n,E){var D=n.fieldProps,h=(0,P.Z)(n,k),l=(0,p.useContext)(v.Z);return(0,a.jsx)(_.Z,(0,u.Z)({ref:E,valueType:F,fieldProps:(0,u.Z)({getPopupContainer:l.getPopupContainer},D),filedConfig:{valueType:F,customLightMode:!0}},h))}),Q=H,U=["proFieldProps","fieldProps"],K="dateWeek",N=p.forwardRef(function(n,E){var D=n.proFieldProps,h=n.fieldProps,l=(0,P.Z)(n,U),m=(0,p.useContext)(v.Z);return(0,a.jsx)(_.Z,(0,u.Z)({ref:E,valueType:K,fieldProps:(0,u.Z)({getPopupContainer:m.getPopupContainer},h),proFieldProps:D,filedConfig:{valueType:K,customLightMode:!0}},l))}),w=N,J=["proFieldProps","fieldProps"],C="dateYear",T=p.forwardRef(function(n,E){var D=n.proFieldProps,h=n.fieldProps,l=(0,P.Z)(n,J),m=(0,p.useContext)(v.Z);return(0,a.jsx)(_.Z,(0,u.Z)({ref:E,valueType:C,fieldProps:(0,u.Z)({getPopupContainer:m.getPopupContainer},h),proFieldProps:D,filedConfig:{valueType:C,customLightMode:!0}},l))}),X=T,o=M;o.Week=w,o.Month=V,o.Quarter=Q,o.Year=X,o.displayName="ProFormComponent";var S=o},58547:function(G,j,e){e.d(j,{h:function(){return P}});var u=e(67294),P=function(_){return Array.isArray(_)?_:_&&_.fileList},p=function(_){return new Promise(function(a,O){var c=new FileReader;c.readAsDataURL(_.file.originFileObj),c.onload=function(){var x=c.result;a(x)},c.onerror=function(x){return O(x)}})}},87296:function(G,j,e){e.r(j);var u=e(97857),P=e.n(u),p=e(5574),v=e.n(p),_=e(15009),a=e.n(_),O=e(99289),c=e.n(O),x=e(6110),M=e(34994),A=e(2236),B=e(38345),R=e(5966),V=e(50335),k=e(90672),F=e(2453),H=e(8232),Q=e(71230),U=e(15746),K=e(95715),N=e(66476),w=e(83622),J=e(88484),C=e(76772),T=e(67294),X=e(58547),o=e(85893),S=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(m){setTimeout(function(){m(!0)},l)})},n={image_url:"",name:"",email:"",date_of_birth:"",mobile_no:"",bio_data:""},E=function(){var h=c()(a()().mark(function l(m,q,s){var ee;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",s),f.prev=2,ee={image_url:q,name:s==null?void 0:s.name,email:s==null?void 0:s.email,date_of_birth:s==null?void 0:s.date_of_birth,mobile_no:s==null?void 0:s.mobile_no,bio_data:s==null?void 0:s.bio_data},f.next=6,(0,C.request)("/api/users/"+m,{method:"PUT",data:ee}).then(function(){var Z=c()(a()().mark(function b(I){var L;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:console.log("api_response"),console.log(I),(I==null||(L=I.data)===null||L===void 0?void 0:L.id)>0&&F.ZP.success("Updated successfully");case 3:case"end":return W.stop()}},b)}));return function(b){return Z.apply(this,arguments)}}()).catch(function(Z){console.log(Z)});case 6:return f.abrupt("return",f.sent);case 9:f.prev=9,f.t0=f.catch(2),console.log("api_response - error"),console.log(f.t0);case 13:return f.abrupt("return",!0);case 14:case"end":return f.stop()}},l,null,[[2,9]])}));return function(m,q,s){return h.apply(this,arguments)}}(),D=function(){var l=(0,C.useModel)("@@initialState"),m=l.initialState,q=l.loading,s=l.refresh,ee=l.setInitialState,ve=(0,C.useParams)(),f=(0,T.useState)(0),Z=v()(f,2),b=Z[0],I=Z[1],L=H.Z.useForm(),ue=v()(L,1),W=ue[0],fe=(0,T.useState)(""),_e=v()(fe,2),re=_e[0],Pe=_e[1],he=(0,T.useState)(re),ce=v()(he,2),oe=ce[0],me=ce[1],ge=(0,T.useState)(""),pe=v()(ge,2),Ee=pe[0],De=pe[1];return(0,T.useEffect)(function(){var g;I(m==null||(g=m.currentUser)===null||g===void 0?void 0:g.id)},[]),(0,o.jsx)(x._z,{children:(0,o.jsx)(M.A,{layout:"vertical",grid:!0,form:W,initialValues:n,params:{user_id:b},request:c()(a()().mark(function g(){var r,i=arguments;return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r=i.length>0&&i[0]!==void 0?i[0]:{},console.log("proform-params"),console.log(r),(r==null?void 0:r.user_id)!=0){d.next=5;break}return d.abrupt("return");case 5:return console.log("params?.user_id"),console.log(r==null?void 0:r.user_id),d.next=9,S(2e3);case 9:return d.next=11,(0,C.request)("/api/users/"+(r==null?void 0:r.user_id),{method:"GET"}).then(function(){var z=c()(a()().mark(function y(t){var ae,te,ne,le,ie,se,de;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return console.log("api_response"),console.log(t),Pe(t==null||(ae=t.data)===null||ae===void 0?void 0:ae.image_url),Y.abrupt("return",P()(P()({},n),{},{image_url:t==null||(te=t.data)===null||te===void 0?void 0:te.image_url,name:t==null||(ne=t.data)===null||ne===void 0?void 0:ne.name,email:t==null||(le=t.data)===null||le===void 0?void 0:le.email,date_of_birth:t==null||(ie=t.data)===null||ie===void 0?void 0:ie.date_of_birth,mobile_no:t==null||(se=t.data)===null||se===void 0?void 0:se.mobile_no,bio_data:t==null||(de=t.data)===null||de===void 0?void 0:de.bio_data}));case 4:case"end":return Y.stop()}},y)}));return function(y){return z.apply(this,arguments)}}()).catch(function(z){console.log(z)});case 11:return d.abrupt("return",d.sent);case 12:case"end":return d.stop()}},g)})),onFinish:function(){var g=c()(a()().mark(function r(i){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log(i),d.next=3,S(1e3);case 3:return i.user_id=b,i.image_url=oe,d.next=7,E(b,oe,i);case 7:case"end":return d.stop()}},r)}));return function(r){return g.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(r,i){return(0,o.jsx)(A.S,{children:i})}},children:(0,o.jsx)(B.Z,{title:"Account Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(r){return console.log(r)},children:(0,o.jsxs)(Q.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,o.jsx)(U.Z,{span:6,children:(0,o.jsxs)(M.A.Group,{size:24,children:[(0,o.jsx)(U.Z,{span:24,children:(0,o.jsx)(K.Z,{width:"100%",height:200,src:oe,fallback:re!==""?re:"http://mairaj.project.localhost.com/images/default/user-profile-image.png"})}),(0,o.jsx)(U.Z,{span:24,style:{textAlign:"center"},children:(0,o.jsx)(M.A.Item,{name:"image_url",getValueFromEvent:X.h,children:(0,o.jsx)(N.Z,{name:"file",onChange:function(r){if(console.log("file - onChange - info"),console.log(r),r.file.status!=="uploading"){if(r.file.status=="removed"&&me(""),r.file.status==="done"){var i;me(r==null||(i=r.file)===null||i===void 0||(i=i.response)===null||i===void 0?void 0:i.url)}r.file.status==="error"&&F.ZP.error("".concat(r.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(r){console.log("file is removed"),console.log(r),(0,C.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:r==null?void 0:r.name,directory:"users"}}).then(function(){var i=c()(a()().mark(function $(d){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:console.log("api_response"),console.log(d);case 2:case"end":return y.stop()}},$)}));return function($){return i.apply(this,arguments)}}())},children:(0,o.jsx)(w.ZP,{type:"primary",icon:(0,o.jsx)(J.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(r){},children:"Change Image"})})})})]})}),(0,o.jsxs)(U.Z,{span:18,children:[(0,o.jsxs)(M.A.Group,{size:24,children:[(0,o.jsx)(R.Z,{name:"name",label:"Name",placeholder:"Type Your Name",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,o.jsx)(R.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,o.jsxs)(M.A.Group,{size:24,children:[(0,o.jsx)(V.Z,{label:"Date of Birth",name:"date_of_birth",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,o.jsx)(R.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,o.jsx)(M.A.Group,{size:24,children:(0,o.jsx)(k.Z,{name:"bio_data",label:"Biographical Info",fieldProps:{rows:6},placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})})})})};j.default=D}}]);
