"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[25],{38345:function(V,O,e){var c=e(1413),P=e(53911),m=e(44962),f=e(13286),u=e(85893),l=function(C){return(0,u.jsx)(P.Z,(0,c.Z)({bodyStyle:{padding:0}},C))},E=P.Z;E.isProCard=!0,E.Divider=m.Z,E.TabPane=f.Z,E.Group=l,O.Z=E},50335:function(V,O,e){e.d(O,{Z:function(){return k}});var c=e(1413),P=e(91),m=e(67294),f=e(66758),u=e(57812),l=e(85893),E=["proFieldProps","fieldProps"],p="date",C=m.forwardRef(function(n,x){var j=n.proFieldProps,h=n.fieldProps,i=(0,P.Z)(n,E),_=(0,m.useContext)(f.Z);return(0,l.jsx)(u.Z,(0,c.Z)({ref:x,valueType:p,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},h),proFieldProps:j,filedConfig:{valueType:p,customLightMode:!0}},i))}),D=C,J=["proFieldProps","fieldProps"],L="dateMonth",M=m.forwardRef(function(n,x){var j=n.proFieldProps,h=n.fieldProps,i=(0,P.Z)(n,J),_=(0,m.useContext)(f.Z);return(0,l.jsx)(u.Z,(0,c.Z)({ref:x,valueType:L,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},h),proFieldProps:j,filedConfig:{valueType:L,customLightMode:!0}},i))}),X=M,w=["fieldProps"],K="dateQuarter",q=m.forwardRef(function(n,x){var j=n.fieldProps,h=(0,P.Z)(n,w),i=(0,m.useContext)(f.Z);return(0,l.jsx)(u.Z,(0,c.Z)({ref:x,valueType:K,fieldProps:(0,c.Z)({getPopupContainer:i.getPopupContainer},j),filedConfig:{valueType:K,customLightMode:!0}},h))}),ee=q,y=["proFieldProps","fieldProps"],Y="dateWeek",re=m.forwardRef(function(n,x){var j=n.proFieldProps,h=n.fieldProps,i=(0,P.Z)(n,y),_=(0,m.useContext)(f.Z);return(0,l.jsx)(u.Z,(0,c.Z)({ref:x,valueType:Y,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},h),proFieldProps:j,filedConfig:{valueType:Y,customLightMode:!0}},i))}),oe=re,ae=["proFieldProps","fieldProps"],T="dateYear",S=m.forwardRef(function(n,x){var j=n.proFieldProps,h=n.fieldProps,i=(0,P.Z)(n,ae),_=(0,m.useContext)(f.Z);return(0,l.jsx)(u.Z,(0,c.Z)({ref:x,valueType:T,fieldProps:(0,c.Z)({getPopupContainer:_.getPopupContainer},h),proFieldProps:j,filedConfig:{valueType:T,customLightMode:!0}},i))}),te=S,r=D;r.Week=oe,r.Month=X,r.Quarter=ee,r.Year=te,r.displayName="ProFormComponent";var k=r},58547:function(V,O,e){e.d(O,{h:function(){return P}});var c=e(67294),P=function(u){return Array.isArray(u)?u:u&&u.fileList},m=function(u){return new Promise(function(l,E){var p=new FileReader;p.readAsDataURL(u.file.originFileObj),p.onload=function(){var C=p.result;l(C)},p.onerror=function(C){return E(C)}})}},66392:function(V,O,e){e.r(O);var c=e(97857),P=e.n(c),m=e(5574),f=e.n(m),u=e(15009),l=e.n(u),E=e(99289),p=e.n(E),C=e(6110),D=e(34994),J=e(2236),L=e(38345),M=e(5966),X=e(50335),w=e(90672),K=e(2453),q=e(47019),ee=e(71230),y=e(15746),Y=e(95715),re=e(66476),oe=e(83622),ae=e(88484),T=e(76772),S=e(67294),te=e(58547),r=e(85893),k=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(_){setTimeout(function(){_(!0)},i)})},n={image_url:"",name:"",role:"",email:"",date_of_birth:"",mobile_no:"",bio_data:"",address:""},x=function(){var h=p()(l()().mark(function i(_,le,a){var ne;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",a),v.prev=2,ne={image_url:le,name:a==null?void 0:a.name,role:"user",email:a==null?void 0:a.email,date_of_birth:a==null?void 0:a.date_of_birth,mobile_no:a==null?void 0:a.mobile_no,bio_data:a==null?void 0:a.bio_data,address:{street:a==null?void 0:a.street,country:a==null?void 0:a.country,province:a==null?void 0:a.province,city:a==null?void 0:a.city,postal_code:a==null?void 0:a.postal_code}},v.next=6,(0,T.request)("/api/users/"+_,{method:"PUT",data:ne}).then(function(){var Z=p()(l()().mark(function b(A){var $;return l()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:console.log("api_response"),console.log(A),(A==null||($=A.data)===null||$===void 0?void 0:$.id)>0&&K.ZP.success("Updated successfully");case 3:case"end":return G.stop()}},b)}));return function(b){return Z.apply(this,arguments)}}()).catch(function(Z){console.log(Z)});case 6:return v.abrupt("return",v.sent);case 9:v.prev=9,v.t0=v.catch(2),console.log("api_response - error"),console.log(v.t0);case 13:return v.abrupt("return",!0);case 14:case"end":return v.stop()}},i,null,[[2,9]])}));return function(_,le,a){return h.apply(this,arguments)}}(),j=function(){var i=(0,T.useModel)("@@initialState"),_=i.initialState,le=i.loading,a=i.refresh,ne=i.setInitialState,fe=(0,T.useParams)(),v=(0,S.useState)(0),Z=f()(v,2),b=Z[0],A=Z[1],$=q.Z.useForm(),ve=f()($,1),G=ve[0],he=(0,S.useState)("http://mairaj.project.localhost.com/images/default/user-profile-image.png"),Pe=f()(he,2),z=Pe[0],ie=Pe[1];return(0,S.useEffect)(function(){var g;A(_==null||(g=_.currentUser)===null||g===void 0?void 0:g.id)},[]),(0,r.jsx)(C._z,{children:(0,r.jsxs)(D.A,{layout:"vertical",grid:!0,form:G,initialValues:n,params:{user_id:b},request:p()(l()().mark(function g(){var t,d=arguments;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=d.length>0&&d[0]!==void 0?d[0]:{},console.log("proform-params"),console.log(t),(t==null?void 0:t.user_id)!=0){s.next=5;break}return s.abrupt("return");case 5:return console.log("params?.user_id"),console.log(t==null?void 0:t.user_id),s.next=9,k(2e3);case 9:return s.next=11,(0,T.request)("/api/users/"+(t==null?void 0:t.user_id),{method:"GET"}).then(function(){var N=p()(l()().mark(function R(o){var de,se,ue,_e,ce,me,pe,I,W,U,B,F;return l()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return console.log("api_response"),console.log(o),ie(o==null||(de=o.data)===null||de===void 0?void 0:de.image_url),H.abrupt("return",P()(P()({},n),{},{image_url:o==null||(se=o.data)===null||se===void 0?void 0:se.image_url,name:o==null||(ue=o.data)===null||ue===void 0?void 0:ue.name,email:o==null||(_e=o.data)===null||_e===void 0?void 0:_e.email,date_of_birth:o==null||(ce=o.data)===null||ce===void 0?void 0:ce.date_of_birth,mobile_no:o==null||(me=o.data)===null||me===void 0?void 0:me.mobile_no,bio_data:o==null||(pe=o.data)===null||pe===void 0?void 0:pe.bio_data,street:o==null||(I=o.data)===null||I===void 0||(I=I.address)===null||I===void 0?void 0:I.street,country:o==null||(W=o.data)===null||W===void 0||(W=W.address)===null||W===void 0?void 0:W.country,province:o==null||(U=o.data)===null||U===void 0||(U=U.address)===null||U===void 0?void 0:U.province,city:o==null||(B=o.data)===null||B===void 0||(B=B.address)===null||B===void 0?void 0:B.city,postal_code:o==null||(F=o.data)===null||F===void 0||(F=F.address)===null||F===void 0?void 0:F.postal_code}));case 4:case"end":return H.stop()}},R)}));return function(R){return N.apply(this,arguments)}}()).catch(function(N){console.log(N)});case 11:return s.abrupt("return",s.sent);case 12:case"end":return s.stop()}},g)})),onFinish:function(){var g=p()(l()().mark(function t(d){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(d),s.next=3,k(1e3);case 3:return d.user_id=b,d.image_url=z,s.next=7,x(b,z,d);case 7:case"end":return s.stop()}},t)}));return function(t){return g.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(t,d){return(0,r.jsx)(J.S,{children:d})}},children:[(0,r.jsx)(L.Z,{title:"Account Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(t){return console.log(t)},children:(0,r.jsxs)(ee.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(y.Z,{span:6,children:(0,r.jsxs)(D.A.Group,{size:24,children:[(0,r.jsx)(y.Z,{span:24,children:(0,r.jsx)(Y.Z,{width:"100%",height:200,src:z,fallback:z!==""?z:"http://mairaj.project.localhost.com/images/default/user-profile-image.png"})}),(0,r.jsx)(y.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(D.A.Item,{name:"image_url",getValueFromEvent:te.h,children:(0,r.jsx)(re.Z,{name:"file",onChange:function(t){if(console.log("file - onChange - info"),console.log(t),t.file.status!=="uploading"){if(t.file.status=="removed"&&ie(""),t.file.status==="done"){var d;ie(t==null||(d=t.file)===null||d===void 0||(d=d.response)===null||d===void 0?void 0:d.url)}t.file.status==="error"&&K.ZP.error("".concat(t.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(t){console.log("file is removed"),console.log(t),(0,T.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:t==null?void 0:t.name,directory:"users"}}).then(function(){var d=p()(l()().mark(function Q(s){return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:console.log("api_response"),console.log(s);case 2:case"end":return R.stop()}},Q)}));return function(Q){return d.apply(this,arguments)}}())},children:(0,r.jsx)(oe.ZP,{type:"primary",icon:(0,r.jsx)(ae.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(t){},children:"Change Image"})})})})]})}),(0,r.jsxs)(y.Z,{span:18,children:[(0,r.jsxs)(D.A.Group,{size:24,children:[(0,r.jsx)(M.Z,{name:"name",label:"Name",placeholder:"Type Your Name",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(M.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsxs)(D.A.Group,{size:24,children:[(0,r.jsx)(X.Z,{label:"Date of Birth",name:"date_of_birth",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(M.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsx)(D.A.Group,{size:24,children:(0,r.jsx)(w.Z,{name:"bio_data",label:"Biographical Info",fieldProps:{rows:6},placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsxs)(L.Z,{title:"Address Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:[(0,r.jsx)(D.A.Group,{size:24,children:(0,r.jsx)(M.Z,{name:"street",label:"Street address",placeholder:"Please Enter Street Address",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsxs)(D.A.Group,{size:24,children:[(0,r.jsx)(M.Z,{name:"country",label:"Country / Region",placeholder:"Please Enter Country / Region",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(M.Z,{name:"province",label:"Province",placeholder:"Please Enter Province",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsxs)(D.A.Group,{size:24,children:[(0,r.jsx)(M.Z,{name:"city",label:"City",placeholder:"Please Enter City",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(M.Z,{name:"postal_code",label:"Postal Code / ZIP",placeholder:"Please Enter Post Code / ZIP",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]})]})]})})};O.default=j}}]);
