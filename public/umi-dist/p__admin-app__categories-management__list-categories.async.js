"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[517],{82061:function(x,g,e){var c=e(1413),s=e(67294),h=e(47046),t=e(91146),p=function(E,D){return s.createElement(t.Z,(0,c.Z)((0,c.Z)({},E),{},{ref:D,icon:h.Z}))},i=s.forwardRef(p);g.Z=i},47389:function(x,g,e){var c=e(1413),s=e(67294),h=e(27363),t=e(91146),p=function(E,D){return s.createElement(t.Z,(0,c.Z)((0,c.Z)({},E),{},{ref:D,icon:h.Z}))},i=s.forwardRef(p);g.Z=i},51042:function(x,g,e){var c=e(1413),s=e(67294),h=e(42110),t=e(91146),p=function(E,D){return s.createElement(t.Z,(0,c.Z)((0,c.Z)({},E),{},{ref:D,icon:h.Z}))},i=s.forwardRef(p);g.Z=i},68280:function(x,g,e){e.r(g),e.d(g,{default:function(){return J},waitTime:function(){return K},waitTimePromise:function(){return B}});var c=e(97857),s=e.n(c),h=e(15009),t=e.n(h),p=e(99289),i=e.n(p),M=e(47389),E=e(51042),D=e(6110),w=e(91319),Y=e(95715),R=e(83622),A=e(2453),P=e(76772),F=e(27484),L=e.n(F),_=e(67294),z=e(86738),$=e(63783),G=e(82061),n=e(85893),N=function(r){var v=r.rowId,o=r.onFinish;return(0,n.jsx)(z.Z,{title:"Delete the Category",description:"Are you sure you want to delete this Category?",icon:(0,n.jsx)($.Z,{style:{color:"red"}}),placement:"left",onConfirm:i()(t()().mark(function Z(){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/categories/"+v,{method:"DELETE"}).then(function(S){S.status===!0?o({status:!0,text_message:"Category deleted successfully"}):o({status:!1,text_message:"Failed to delete Category: Invalid response"})});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},Z)})),okText:"Yes",cancelText:"No",children:(0,n.jsx)(R.ZP,{danger:!0,children:(0,n.jsx)(G.Z,{})},"deletable")})},Q=N,B=function(){var I=i()(t()().mark(function r(){var v,o=arguments;return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return v=o.length>0&&o[0]!==void 0?o[0]:100,l.abrupt("return",new Promise(function(u){setTimeout(function(){u(!0)},v)}));case 2:case"end":return l.stop()}},r)}));return function(){return I.apply(this,arguments)}}(),K=function(){var I=i()(t()().mark(function r(){var v,o=arguments;return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return v=o.length>0&&o[0]!==void 0?o[0]:100,l.next=3,B(v);case 3:case"end":return l.stop()}},r)}));return function(){return I.apply(this,arguments)}}(),H=function(){var r=(0,P.useModel)("@@initialState"),v=r.initialState,o=r.loading,Z=r.refresh,l=r.setInitialState;console.log("initialState"),console.log(v),console.log("loading"),console.log(o);var u=(0,_.useRef)(),S=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Title",key:"table-column-title",copyable:!0,hideInSearch:!0,render:function(d,a){return(0,n.jsxs)("div",{children:[(0,n.jsx)(Y.Z,{width:50,height:50,src:a==null?void 0:a.image_url}),(0,n.jsx)("span",{style:{margin:"0px 0px 0px 10px"},children:a==null?void 0:a.title})]})}},{title:"Created Date",dataIndex:"created_at",key:"table-column-created-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(d){return(0,n.jsx)("p",{children:L()(new Date(d)).format("DD-MM-YYYY")})}},{title:"Updated Date",dataIndex:"updated_at",key:"table-column-updated-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(d){return(0,n.jsx)("p",{children:L()(new Date(d)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(d,a,T,U){return[(0,n.jsx)(R.ZP,{onClick:function(){P.history.push("/admin-app/categories/edit/"+a.id)},children:(0,n.jsx)(M.Z,{})},"editable"),(0,n.jsx)(Q,{rowId:a==null?void 0:a.id,onFinish:function(f){var C=f.status,y=f.text_message;if(C){var m;A.ZP.success(y),(m=u.current)===null||m===void 0||m.reload()}else A.ZP.error(y)}})]}}];return(0,n.jsx)(D._z,{children:(0,n.jsx)(w.Z,{actionRef:u,rowKey:"id",search:!1,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:function(d){return console.log(d)}},toolBarRender:function(){return[(0,n.jsxs)(R.ZP,{type:"primary",onClick:function(){P.history.push("/admin-app/categories/new")},children:[(0,n.jsx)(E.Z,{})," New"]},"new")]},request:function(){var O=i()(t()().mark(function d(a,T,U){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("params"),console.log(a),console.log("params - sort"),console.log(T),console.log("params - filter"),console.log(U),f.next=8,K(2e3);case 8:return f.next=10,(0,P.request)("/api/categories",{params:{sort:s()({},T),pagination:s()({},a)}}).then(function(){var C=i()(t()().mark(function y(m){return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log("api_response"),console.log(m),console.log("api_response.data"),console.log(m.data),console.log("api_response.data.data"),console.log(m.data.data),j.abrupt("return",{data:m.data.data,total:m.data.total,current_page:m.data.current_page});case 7:case"end":return j.stop()}},y)}));return function(y){return C.apply(this,arguments)}}()).catch(function(C){console.log(C)});case 10:return f.abrupt("return",f.sent);case 11:case"end":return f.stop()}},d)}));return function(d,a,T){return O.apply(this,arguments)}}(),columns:S})})},J=H}}]);
