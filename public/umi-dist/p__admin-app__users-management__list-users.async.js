"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[524],{82061:function(T,v,e){var d=e(1413),i=e(67294),h=e(47046),n=e(91146),p=function(g,E){return i.createElement(n.Z,(0,d.Z)((0,d.Z)({},g),{},{ref:E,icon:h.Z}))},l=i.forwardRef(p);v.Z=l},47389:function(T,v,e){var d=e(1413),i=e(67294),h=e(27363),n=e(91146),p=function(g,E){return i.createElement(n.Z,(0,d.Z)((0,d.Z)({},g),{},{ref:E,icon:h.Z}))},l=i.forwardRef(p);v.Z=l},51042:function(T,v,e){var d=e(1413),i=e(67294),h=e(42110),n=e(91146),p=function(g,E){return i.createElement(n.Z,(0,d.Z)((0,d.Z)({},g),{},{ref:E,icon:h.Z}))},l=i.forwardRef(p);v.Z=l},27956:function(T,v,e){e.r(v),e.d(v,{default:function(){return H},waitTime:function(){return B},waitTimePromise:function(){return L}});var d=e(97857),i=e.n(d),h=e(15009),n=e.n(h),p=e(99289),l=e.n(p),j=e(47389),g=e(51042),E=e(6110),W=e(91319),w=e(68997),C=e(83622),U=e(2453),P=e(76772),Y=e(27484),A=e.n(Y),F=e(67294),_=e(86738),z=e(63783),N=e(82061),a=e(85893),$=function(r){var f=r.rowId,s=r.onFinish;return(0,a.jsx)(_.Z,{title:"Delete the User",description:"Are you sure you want to delete this user?",icon:(0,a.jsx)(z.Z,{style:{color:"red"}}),placement:"left",onConfirm:l()(n()().mark(function y(){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/users/"+f,{method:"DELETE"}).then(function(R){R.status===!0?s({status:!0,text_message:"User deleted successfully"}):s({status:!1,text_message:"Failed to delete User: Invalid response"})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},y)})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(C.ZP,{danger:!0,children:(0,a.jsx)(N.Z,{})},"deletable")})},G=$,L=function(){var I=l()(n()().mark(function r(){var f,s=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=s.length>0&&s[0]!==void 0?s[0]:100,u.abrupt("return",new Promise(function(o){setTimeout(function(){o(!0)},f)}));case 2:case"end":return u.stop()}},r)}));return function(){return I.apply(this,arguments)}}(),B=function(){var I=l()(n()().mark(function r(){var f,s=arguments;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f=s.length>0&&s[0]!==void 0?s[0]:100,u.next=3,L(f);case 3:case"end":return u.stop()}},r)}));return function(){return I.apply(this,arguments)}}(),Q=function(){var r=(0,P.useModel)("@@initialState"),f=r.initialState,s=r.loading,y=r.refresh,u=r.setInitialState;console.log("initialState"),console.log(f),console.log("loading"),console.log(s);var o=(0,F.useRef)(),R=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Name",key:"table-column-name",copyable:!0,hideInSearch:!0,render:function(m,t){return(0,a.jsxs)("div",{children:[(0,a.jsx)(w.Z,{size:"large",src:(t==null?void 0:t.image_url)!==null?t==null?void 0:t.image_url:"http://mairaj.project.localhost.com/images/default/user-profile-image.png"}),(0,a.jsx)("span",{style:{margin:"0px 0px 0px 10px"},children:t==null?void 0:t.name})]})}},{title:"Email",dataIndex:"email",key:"table-column-email",hideInSearch:!0},{title:"Created Date",dataIndex:"created_at",key:"table-column-created-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(m){return(0,a.jsx)("p",{children:A()(new Date(m)).format("DD-MM-YYYY")})}},{title:"Updated Date",dataIndex:"updated_at",key:"table-column-updated-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(m){return(0,a.jsx)("p",{children:A()(new Date(m)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(m,t,S,J){return[(0,a.jsx)(C.ZP,{onClick:function(){P.history.push("/admin-app/users/edit/"+t.id)},children:(0,a.jsx)(j.Z,{})},"editable"),(0,a.jsx)(G,{rowId:t==null?void 0:t.id,onFinish:function(c){var M=c.status,Z=c.text_message;if(M){var D;U.ZP.success(Z),(D=o.current)===null||D===void 0||D.reload()}else U.ZP.error(Z)}})]}}];return(0,a.jsx)(E._z,{children:(0,a.jsx)(W.Z,{actionRef:o,rowKey:"id",search:!1,options:!1,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100]},toolBarRender:function(){return[(0,a.jsxs)(C.ZP,{type:"primary",onClick:function(){P.history.push("/admin-app/users/new")},children:[(0,a.jsx)(g.Z,{})," New"]},"new")]},request:function(){var O=l()(n()().mark(function m(t,S,J){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,B(2e3);case 2:return c.next=4,(0,P.request)("/api/users",{params:{sort:i()({},S),pagination:i()({},t),role:"user"}}).then(function(){var M=l()(n()().mark(function Z(D){return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",{data:D.data.data,total:D.data.total,current_page:D.data.current_page});case 1:case"end":return x.stop()}},Z)}));return function(Z){return M.apply(this,arguments)}}()).catch(function(M){console.log(M)});case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},m)}));return function(m,t,S){return O.apply(this,arguments)}}(),columns:R})})},H=Q}}]);
