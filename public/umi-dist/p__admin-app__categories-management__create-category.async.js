"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[506],{38345:function(z,D,e){var O=e(1413),g=e(53911),R=e(44962),c=e(13286),p=e(85893),y=function(F){return(0,p.jsx)(g.Z,(0,O.Z)({bodyStyle:{padding:0}},F))},f=g.Z;f.isProCard=!0,f.Divider=R.Z,f.TabPane=c.Z,f.Group=y,D.Z=f},58547:function(z,D,e){e.d(D,{h:function(){return g}});var O=e(67294),g=function(p){return Array.isArray(p)?p:p&&p.fileList},R=function(p){return new Promise(function(y,f){var i=new FileReader;i.readAsDataURL(p.file.originFileObj),i.onload=function(){var F=i.result;y(F)},i.onerror=function(F){return f(F)}})}},49426:function(z,D,e){e.r(D),e.d(D,{default:function(){return pe}});var O=e(5574),g=e.n(O),R=e(15009),c=e.n(R),p=e(99289),y=e.n(p),f=e(6110),i=e(34994),F=e(2236),W=e(38345),X=e(5966),Y=e(90672),K=e(5155),Z=e(1413),V=e(91),$=e(22270),P=e(67294),b=e(66758),H=e(68256),r=e(85893),w=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],q=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],k=function(a,n){var j=a.fieldProps,x=a.children,m=a.params,v=a.proFieldProps,E=a.mode,l=a.valueEnum,s=a.request,T=a.showSearch,d=a.options,C=(0,V.Z)(a,w),S=(0,P.useContext)(b.Z);return(0,r.jsx)(H.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,$.h)(l),request:s,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({options:d,mode:E,showSearch:T,getPopupContainer:S.getPopupContainer},j),ref:n,proFieldProps:v},C),{},{children:x}))},_=P.forwardRef(function(u,a){var n=u.fieldProps,j=u.children,x=u.params,m=u.proFieldProps,v=u.mode,E=u.valueEnum,l=u.request,s=u.options,T=(0,V.Z)(u,q),d=(0,Z.Z)({options:s,mode:v||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},n),C=(0,P.useContext)(b.Z);return(0,r.jsx)(H.Z,(0,Z.Z)((0,Z.Z)({valueEnum:(0,$.h)(E),request:l,params:x,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,Z.Z)({getPopupContainer:C.getPopupContainer},d),ref:a,proFieldProps:m},T),{},{children:j}))}),ee=P.forwardRef(k),re=_,L=ee;L.SearchSelect=re,L.displayName="ProFormComponent";var N=L,J=e(2453),te=e(8232),oe=e(71230),M=e(15746),ne=e(95715),ae=e(66476),le=e(83622),se=e(88484),B=e(76772),ie=e(58547),ue=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(n){setTimeout(function(){n(!0)},a)})},de=function(){var u=y()(c()().mark(function a(n,j){var x,m,v;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),l.prev=2,v={image_url:j,title:n==null?void 0:n.title,description:n==null?void 0:n.description,author_id:1,tutors:(n==null||(x=n.tutors)===null||x===void 0?void 0:x.map(function(s){return s==null?void 0:s.tutor}))||[],users:(n==null||(m=n.users)===null||m===void 0?void 0:m.map(function(s){return s==null?void 0:s.user}))||[]},console.log("request_data"),console.log(v),l.next=8,(0,B.request)("/api/categories",{method:"POST",data:v}).then(function(){var s=y()(c()().mark(function T(d){var C,S;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:console.log("api_response"),console.log(d),(d==null||(C=d.data)===null||C===void 0?void 0:C.id)>0&&(J.ZP.success("Submitted successfully"),B.history.push("/admin-app/categories/edit/"+(d==null||(S=d.data)===null||S===void 0?void 0:S.id)));case 3:case"end":return I.stop()}},T)}));return function(T){return s.apply(this,arguments)}}()).catch(function(s){console.log(s)});case 8:return l.abrupt("return",l.sent);case 11:l.prev=11,l.t0=l.catch(2),console.log("api_response - error"),console.log(l.t0);case 15:return l.abrupt("return",!0);case 16:case"end":return l.stop()}},a,null,[[2,11]])}));return function(n,j){return u.apply(this,arguments)}}(),ce=function(){var a=te.Z.useForm(),n=g()(a,1),j=n[0],x=(0,P.useState)("http://mairaj.project.localhost.com/images/default/placeholder.jpg"),m=g()(x,2),v=m[0],E=m[1],l=(0,P.useState)([]),s=g()(l,2),T=s[0],d=s[1],C=(0,P.useState)([]),S=g()(C,2),Q=S[0],I=S[1],me={tutors:[{tutor:void 0}],users:[{user:void 0}]};return(0,P.useEffect)(function(){return(0,B.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(h){var t=h.data.data.map(function(o,U){return{value:o==null?void 0:o.id,label:o==null?void 0:o.name}});return d(t),t})},[]),(0,P.useEffect)(function(){return(0,B.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(h){var t=h.data.data.map(function(o,U){return{value:o==null?void 0:o.id,label:o==null?void 0:o.name}});return I(t),t})},[]),(0,r.jsx)(f._z,{children:(0,r.jsxs)(i.A,{onFinish:function(){var h=y()(c()().mark(function t(o){return c()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,ue(2e3);case 2:return A.next=4,de(o,v);case 4:case"end":return A.stop()}},t)}));return function(t){return h.apply(this,arguments)}}(),layout:"vertical",grid:!0,initialValues:me,form:j,submitter:{render:function(t,o){return(0,r.jsx)(F.S,{children:o})}},children:[(0,r.jsx)(W.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(t){return console.log(t)},children:(0,r.jsxs)(oe.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(M.Z,{span:6,children:(0,r.jsxs)(i.A.Group,{size:24,children:[(0,r.jsx)(M.Z,{span:24,children:(0,r.jsx)(ne.Z,{width:"100%",height:200,src:v})}),(0,r.jsx)(M.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(i.A.Item,{name:"image_url",getValueFromEvent:ie.h,children:(0,r.jsx)(ae.Z,{name:"file",onChange:function(t){if(console.log("file - onChange - info"),console.log(t),t.file.status!=="uploading"){if(t.file.status=="removed"&&E(""),t.file.status==="done"){var o;E(t==null||(o=t.file)===null||o===void 0||(o=o.response)===null||o===void 0?void 0:o.url)}t.file.status==="error"&&J.ZP.error("".concat(t.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(t){console.log("file is removed"),console.log(t),(0,B.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:t==null?void 0:t.name,directory:"categories"}}).then(function(){var o=y()(c()().mark(function U(A){return c()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:console.log("api_response"),console.log(A);case 2:case"end":return G.stop()}},U)}));return function(U){return o.apply(this,arguments)}}())},children:(0,r.jsx)(le.ZP,{type:"primary",icon:(0,r.jsx)(se.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(t){},children:"Change Image"})})})})]})}),(0,r.jsxs)(M.Z,{span:18,children:[(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(X.Z,{name:"title",label:"Title",placeholder:"Type Category Title",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(Y.Z,{name:"description",label:"Description",placeholder:"Share a little description to fill out your category.",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsx)(W.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(K.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(N,{name:"tutor",label:"Tutor",showSearch:!0,options:T,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,r.jsx)(W.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(K.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(i.A.Group,{size:24,children:(0,r.jsx)(N,{name:"user",label:"User",showSearch:!0,options:Q,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})})},pe=ce}}]);
