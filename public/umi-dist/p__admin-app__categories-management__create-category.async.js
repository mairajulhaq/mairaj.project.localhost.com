"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[506],{88484:function(N,P,e){e.d(P,{Z:function(){return n}});var d=e(1413),p=e(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=M,_=e(91146),m=function(C,B){return p.createElement(_.Z,(0,d.Z)((0,d.Z)({},C),{},{ref:B,icon:s}))},g=p.forwardRef(m),n=g},64317:function(N,P,e){var d=e(1413),p=e(91),M=e(22270),s=e(67294),_=e(66758),m=e(68256),g=e(85893),n=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],f=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],C=function(l,I){var D=l.fieldProps,R=l.children,W=l.params,L=l.proFieldProps,y=l.mode,v=l.valueEnum,E=l.request,Z=l.showSearch,r=l.options,S=(0,p.Z)(l,n),J=(0,s.useContext)(_.Z);return(0,g.jsx)(m.Z,(0,d.Z)((0,d.Z)({valueEnum:(0,M.h)(v),request:E,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({options:r,mode:y,showSearch:Z,getPopupContainer:J.getPopupContainer},D),ref:I,proFieldProps:L},S),{},{children:R}))},B=s.forwardRef(function(c,l){var I=c.fieldProps,D=c.children,R=c.params,W=c.proFieldProps,L=c.mode,y=c.valueEnum,v=c.request,E=c.options,Z=(0,p.Z)(c,f),r=(0,d.Z)({options:E,mode:L||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),S=(0,s.useContext)(_.Z);return(0,g.jsx)(m.Z,(0,d.Z)((0,d.Z)({valueEnum:(0,M.h)(y),request:v,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,d.Z)({getPopupContainer:S.getPopupContainer},r),ref:l,proFieldProps:W},Z),{},{children:D}))}),w=s.forwardRef(C),V=B,x=w;x.SearchSelect=V,x.displayName="ProFormComponent",P.Z=x},58547:function(N,P,e){e.d(P,{h:function(){return p}});var d=e(67294),p=function(_){return Array.isArray(_)?_:_&&_.fileList},M=function(_){return new Promise(function(m,g){var n=new FileReader;n.readAsDataURL(_.file.originFileObj),n.onload=function(){var f=n.result;m(f)},n.onerror=function(f){return g(f)}})}},33687:function(N,P,e){e.r(P);var d=e(5574),p=e.n(d),M=e(15009),s=e.n(M),_=e(99289),m=e.n(_),g=e(6110),n=e(34994),f=e(2236),C=e(38345),B=e(5966),w=e(90672),V=e(5155),x=e(64317),c=e(2453),l=e(8232),I=e(71230),D=e(15746),R=e(95715),W=e(66476),L=e(83622),y=e(88484),v=e(67294),E=e(76772),Z=e(58547),r=e(85893),S=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(a){setTimeout(function(){a(!0)},T)})},J=function(){var Q=m()(s()().mark(function T(a,H){var K,A,F;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",a),i.prev=2,F={image_url:H,title:a==null?void 0:a.title,description:a==null?void 0:a.description,author_id:1,tutors:(a==null||(K=a.tutors)===null||K===void 0?void 0:K.map(function(u){return u==null?void 0:u.tutor}))||[],users:(a==null||(A=a.users)===null||A===void 0?void 0:A.map(function(u){return u==null?void 0:u.user}))||[]},i.next=6,(0,E.request)("/api/categories",{method:"POST",data:F}).then(function(){var u=m()(s()().mark(function $(O){var b,U;return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:(O==null||(b=O.data)===null||b===void 0?void 0:b.id)>0&&(c.ZP.success("Submitted successfully"),E.history.push("/admin-app/categories/edit/"+(O==null||(U=O.data)===null||U===void 0?void 0:U.id)));case 1:case"end":return z.stop()}},$)}));return function($){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)});case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(2),console.log("api_response - error"),console.log(i.t0);case 13:return i.abrupt("return",!0);case 14:case"end":return i.stop()}},T,null,[[2,9]])}));return function(a,H){return Q.apply(this,arguments)}}(),q=function(){var T=l.Z.useForm(),a=p()(T,1),H=a[0],K=(0,v.useState)("http://mairaj.project.localhost.com/images/default/placeholder.jpg"),A=p()(K,2),F=A[0],X=A[1],i=(0,v.useState)([]),u=p()(i,2),$=u[0],O=u[1],b=(0,v.useState)([]),U=p()(b,2),k=U[0],z=U[1],ee={tutors:[{tutor:void 0}],users:[{user:void 0}]};return(0,v.useEffect)(function(){return(0,E.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(h){var o=h.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return O(o),o})},[]),(0,v.useEffect)(function(){return(0,E.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(h){var o=h.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return z(o),o})},[]),(0,r.jsx)(g._z,{children:(0,r.jsxs)(n.A,{onFinish:function(){var h=m()(s()().mark(function o(t){return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,S(2e3);case 2:return j.next=4,J(t,F);case 4:case"end":return j.stop()}},o)}));return function(o){return h.apply(this,arguments)}}(),layout:"vertical",grid:!0,initialValues:ee,form:H,submitter:{render:function(o,t){return(0,r.jsx)(f.S,{children:t})}},children:[(0,r.jsx)(C.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(D.Z,{span:6,children:(0,r.jsxs)(n.A.Group,{size:24,children:[(0,r.jsx)(D.Z,{span:24,children:(0,r.jsx)(R.Z,{width:"100%",height:200,src:F})}),(0,r.jsx)(D.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(n.A.Item,{name:"image_url",getValueFromEvent:Z.h,children:(0,r.jsx)(W.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&X(""),o.file.status==="done"){var t;X(o==null||(t=o.file)===null||t===void 0||(t=t.response)===null||t===void 0?void 0:t.url)}o.file.status==="error"&&c.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,E.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"categories"}}).then(function(){var t=m()(s()().mark(function G(j){return s()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:console.log("api_response"),console.log(j);case 2:case"end":return Y.stop()}},G)}));return function(G){return t.apply(this,arguments)}}())},children:(0,r.jsx)(L.ZP,{type:"primary",icon:(0,r.jsx)(y.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(D.Z,{span:18,children:[(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(B.Z,{name:"title",label:"Title",placeholder:"Type Category Title",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(w.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your category.",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsx)(C.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(V.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(x.Z,{name:"tutor",label:"Tutor",showSearch:!0,options:$,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,r.jsx)(C.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(V.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(n.A.Group,{size:24,children:(0,r.jsx)(x.Z,{name:"user",label:"User",showSearch:!0,options:k,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})})};P.default=q}}]);
