"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[506],{38345:function(H,D,e){var c=e(1413),p=e(53911),O=e(44962),s=e(13286),_=e(85893),h=function(v){return(0,_.jsx)(p.Z,(0,c.Z)({bodyStyle:{padding:0}},v))},m=p.Z;m.isProCard=!0,m.Divider=O.Z,m.TabPane=s.Z,m.Group=h,D.Z=m},64317:function(H,D,e){var c=e(1413),p=e(91),O=e(22270),s=e(67294),_=e(66758),h=e(57812),m=e(85893),a=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],B=function(l,I){var f=l.fieldProps,R=l.children,U=l.params,W=l.proFieldProps,L=l.mode,P=l.valueEnum,g=l.request,y=l.showSearch,r=l.options,K=(0,p.Z)(l,a),Q=(0,s.useContext)(_.Z);return(0,m.jsx)(h.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,O.h)(P),request:g,params:U,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:r,mode:L,showSearch:y,getPopupContainer:Q.getPopupContainer},f),ref:I,proFieldProps:W},K),{},{children:R}))},N=s.forwardRef(function(d,l){var I=d.fieldProps,f=d.children,R=d.params,U=d.proFieldProps,W=d.mode,L=d.valueEnum,P=d.request,g=d.options,y=(0,p.Z)(d,v),r=(0,c.Z)({options:g,mode:W||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),K=(0,s.useContext)(_.Z);return(0,m.jsx)(h.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,O.h)(L),request:P,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:K.getPopupContainer},r),ref:l,proFieldProps:U},y),{},{children:f}))}),J=s.forwardRef(B),z=N,T=J;T.SearchSelect=z,T.displayName="ProFormComponent",D.Z=T},58547:function(H,D,e){e.d(D,{h:function(){return p}});var c=e(67294),p=function(_){return Array.isArray(_)?_:_&&_.fileList},O=function(_){return new Promise(function(h,m){var a=new FileReader;a.readAsDataURL(_.file.originFileObj),a.onload=function(){var v=a.result;h(v)},a.onerror=function(v){return m(v)}})}},33687:function(H,D,e){e.r(D);var c=e(5574),p=e.n(c),O=e(15009),s=e.n(O),_=e(99289),h=e.n(_),m=e(6110),a=e(34994),v=e(2236),B=e(38345),N=e(5966),J=e(90672),z=e(5155),T=e(64317),d=e(2453),l=e(47019),I=e(71230),f=e(15746),R=e(95715),U=e(66476),W=e(83622),L=e(88484),P=e(67294),g=e(76772),y=e(58547),r=e(85893),K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(n){setTimeout(function(){n(!0)},j)})},Q=function(){var X=h()(s()().mark(function j(n,V){var Z,x,S;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),i.prev=2,S={image_url:V,title:n==null?void 0:n.title,description:n==null?void 0:n.description,author_id:1,tutors:(n==null||(Z=n.tutors)===null||Z===void 0?void 0:Z.map(function(u){return u==null?void 0:u.tutor}))||[],users:(n==null||(x=n.users)===null||x===void 0?void 0:x.map(function(u){return u==null?void 0:u.user}))||[]},i.next=6,(0,g.request)("/api/categories",{method:"POST",data:S}).then(function(){var u=h()(s()().mark(function $(M){var F,A;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(M==null||(F=M.data)===null||F===void 0?void 0:F.id)>0&&(d.ZP.success("Submitted successfully"),g.history.push("/admin-app/categories/edit/"+(M==null||(A=M.data)===null||A===void 0?void 0:A.id)));case 1:case"end":return b.stop()}},$)}));return function($){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)});case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(2),console.log("api_response - error"),console.log(i.t0);case 13:return i.abrupt("return",!0);case 14:case"end":return i.stop()}},j,null,[[2,9]])}));return function(n,V){return X.apply(this,arguments)}}(),k=function(){var j=l.Z.useForm(),n=p()(j,1),V=n[0],Z=(0,P.useState)("http://mairaj.project.localhost.com/images/default/placeholder.jpg"),x=p()(Z,2),S=x[0],Y=x[1],i=(0,P.useState)([]),u=p()(i,2),$=u[0],M=u[1],F=(0,P.useState)([]),A=p()(F,2),q=A[0],b=A[1],ee={tutors:[{tutor:void 0}],users:[{user:void 0}]};return(0,P.useEffect)(function(){return(0,g.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(E){var o=E.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return M(o),o})},[]),(0,P.useEffect)(function(){return(0,g.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(E){var o=E.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return b(o),o})},[]),(0,r.jsx)(m._z,{children:(0,r.jsxs)(a.A,{onFinish:function(){var E=h()(s()().mark(function o(t){return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,K(2e3);case 2:return C.next=4,Q(t,S);case 4:case"end":return C.stop()}},o)}));return function(o){return E.apply(this,arguments)}}(),layout:"vertical",grid:!0,initialValues:ee,form:V,submitter:{render:function(o,t){return(0,r.jsx)(v.S,{children:t})}},children:[(0,r.jsx)(B.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(f.Z,{span:6,children:(0,r.jsxs)(a.A.Group,{size:24,children:[(0,r.jsx)(f.Z,{span:24,children:(0,r.jsx)(R.Z,{width:"100%",height:200,src:S})}),(0,r.jsx)(f.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(a.A.Item,{name:"image_url",getValueFromEvent:y.h,children:(0,r.jsx)(U.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&Y(""),o.file.status==="done"){var t;Y(o==null||(t=o.file)===null||t===void 0||(t=t.response)===null||t===void 0?void 0:t.url)}o.file.status==="error"&&d.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,g.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"categories"}}).then(function(){var t=h()(s()().mark(function G(C){return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:console.log("api_response"),console.log(C);case 2:case"end":return w.stop()}},G)}));return function(G){return t.apply(this,arguments)}}())},children:(0,r.jsx)(W.ZP,{type:"primary",icon:(0,r.jsx)(L.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(f.Z,{span:18,children:[(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(N.Z,{name:"title",label:"Title",placeholder:"Type Category Title",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(J.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your category.",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsx)(B.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(z.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(T.Z,{name:"tutor",label:"Tutor",showSearch:!0,options:$,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,r.jsx)(B.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(z.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(T.Z,{name:"user",label:"User",showSearch:!0,options:q,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})})};D.default=k}}]);
