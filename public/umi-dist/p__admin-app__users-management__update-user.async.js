"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[534],{51042:function(V,x,e){var d=e(1413),P=e(67294),m=e(42110),p=e(91146),u=function(_,D){return P.createElement(p.Z,(0,d.Z)((0,d.Z)({},_),{},{ref:D,icon:m.Z}))},a=P.forwardRef(u);x.Z=a},50335:function(V,x,e){e.d(x,{Z:function(){return r}});var d=e(1413),P=e(91),m=e(67294),p=e(66758),u=e(68256),a=e(85893),b=["proFieldProps","fieldProps"],_="date",D=m.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,b),v=(0,m.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:_,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:_,customLightMode:!0}},f))}),O=D,w=["proFieldProps","fieldProps"],$="dateMonth",B=m.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,w),v=(0,m.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:$,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:$,customLightMode:!0}},f))}),J=B,X=["fieldProps"],F="dateQuarter",q=m.forwardRef(function(l,h){var g=l.fieldProps,E=(0,P.Z)(l,X),f=(0,m.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:F,fieldProps:(0,d.Z)({getPopupContainer:f.getPopupContainer},g),filedConfig:{valueType:F,customLightMode:!0}},E))}),k=q,C=["proFieldProps","fieldProps"],L="dateWeek",ee=m.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,C),v=(0,m.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:L,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:L,customLightMode:!0}},f))}),re=ee,oe=["proFieldProps","fieldProps"],Y="dateYear",y=m.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,oe),v=(0,m.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:Y,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:Y,customLightMode:!0}},f))}),T=y,Z=O;Z.Week=re,Z.Month=J,Z.Quarter=k,Z.Year=T,Z.displayName="ProFormComponent";var r=Z},58547:function(V,x,e){e.d(x,{h:function(){return P}});var d=e(67294),P=function(u){return Array.isArray(u)?u:u&&u.fileList},m=function(u){return new Promise(function(a,b){var _=new FileReader;_.readAsDataURL(u.file.originFileObj),_.onload=function(){var D=_.result;a(D)},_.onerror=function(D){return b(D)}})}},84381:function(V,x,e){e.r(x);var d=e(97857),P=e.n(d),m=e(5574),p=e.n(m),u=e(15009),a=e.n(u),b=e(99289),_=e.n(b),D=e(6110),O=e(34994),w=e(2236),$=e(38345),B=e(5966),J=e(50335),X=e(90672),F=e(2453),q=e(8232),k=e(71230),C=e(15746),L=e(83622),ee=e(95715),re=e(66476),oe=e(51042),Y=e(88484),y=e(67294),T=e(76772),Z=e(58547),r=e(85893),l=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(R){setTimeout(function(){R(!0)},v)})},h={image_url:"",name:"",email:"",date_of_birth:"",mobile_no:"",bio_data:""},g=function(){var f=_()(a()().mark(function v(R,n){var G;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),c.prev=2,G={image_url:R,name:n==null?void 0:n.name,email:n==null?void 0:n.email,date_of_birth:n==null?void 0:n.date_of_birth,mobile_no:n==null?void 0:n.mobile_no,bio_data:n==null?void 0:n.bio_data},c.next=6,(0,T.request)("/api/users/"+(n==null?void 0:n.user_id),{method:"PUT",data:G}).then(function(){var A=_()(a()().mark(function z(M){var I,K;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:console.log("api_response"),console.log(M),(M==null||(I=M.data)===null||I===void 0?void 0:I.id)>0&&(F.ZP.success("Submitted successfully"),T.history.push("/admin-app/users/edit/"+(M==null||(K=M.data)===null||K===void 0?void 0:K.id)));case 3:case"end":return S.stop()}},z)}));return function(z){return A.apply(this,arguments)}}()).catch(function(A){console.log(A)});case 6:return c.abrupt("return",c.sent);case 9:c.prev=9,c.t0=c.catch(2),console.log("api_response - error"),console.log(c.t0);case 13:return c.abrupt("return",!0);case 14:case"end":return c.stop()}},v,null,[[2,9]])}));return function(R,n){return f.apply(this,arguments)}}(),E=function(){var v=(0,T.useParams)(),R=q.Z.useForm(),n=p()(R,1),G=n[0],ue=(0,y.useState)(0),c=p()(ue,2),A=c[0],z=c[1],M=(0,y.useState)(""),I=p()(M,2),K=I[0],_e=I[1],S=(0,y.useState)(K),me=p()(S,2),U=me[0],ce=me[1];return(0,y.useEffect)(function(){z(v.id)},[]),(0,r.jsxs)(D._z,{children:[(0,r.jsxs)(k.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(C.Z,{flex:"auto"}),(0,r.jsx)(C.Z,{flex:"100px",children:(0,r.jsxs)(L.ZP,{type:"primary",onClick:function(){T.history.push("/admin-app/users/new")},style:{marginBlockEnd:15},children:[(0,r.jsx)(oe.Z,{})," New"]},"new")})]}),(0,r.jsx)(O.A,{layout:"vertical",grid:!0,form:G,initialValues:h,params:{user_id:A},request:_()(a()().mark(function j(){var o,i=arguments;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=i.length>0&&i[0]!==void 0?i[0]:{},console.log("proform-params"),console.log(o),(o==null?void 0:o.user_id)!=0){s.next=5;break}return s.abrupt("return");case 5:return s.next=7,l(2e3);case 7:return s.next=9,(0,T.request)("/api/users/"+(o==null?void 0:o.user_id),{method:"GET"}).then(function(){var Q=_()(a()().mark(function W(t){var ae,ne,te,le,ie,se,de;return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return console.log("api_response"),console.log(t),_e(t==null||(ae=t.data)===null||ae===void 0?void 0:ae.image_url),H.abrupt("return",P()(P()({},h),{},{image_url:t==null||(ne=t.data)===null||ne===void 0?void 0:ne.image_url,name:t==null||(te=t.data)===null||te===void 0?void 0:te.name,email:t==null||(le=t.data)===null||le===void 0?void 0:le.email,date_of_birth:t==null||(ie=t.data)===null||ie===void 0?void 0:ie.date_of_birth,mobile_no:t==null||(se=t.data)===null||se===void 0?void 0:se.mobile_no,bio_data:t==null||(de=t.data)===null||de===void 0?void 0:de.bio_data}));case 4:case"end":return H.stop()}},W)}));return function(W){return Q.apply(this,arguments)}}()).catch(function(Q){console.log(Q)});case 9:return s.abrupt("return",s.sent);case 10:case"end":return s.stop()}},j)})),onFinish:function(){var j=_()(a()().mark(function o(i){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(i),s.next=3,l(1e3);case 3:return i.user_id=A,i.image_url=U,s.next=7,g(U,i);case 7:case"end":return s.stop()}},o)}));return function(o){return j.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(o,i){return(0,r.jsx)(w.S,{children:i})}},children:(0,r.jsx)($.Z,{title:"BIO Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(k.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(C.Z,{span:6,children:(0,r.jsxs)(O.A.Group,{size:24,children:[(0,r.jsx)(C.Z,{span:24,children:(0,r.jsx)(ee.Z,{width:"100%",height:200,src:U,fallback:U!==""||U===null?U:"http://mairaj.project.localhost.com/images/default/user-profile-image.png"})}),(0,r.jsx)(C.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(O.A.Item,{name:"image_url",getValueFromEvent:Z.h,children:(0,r.jsx)(re.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&ce(""),o.file.status==="done"){var i;ce(o==null||(i=o.file)===null||i===void 0||(i=i.response)===null||i===void 0?void 0:i.url)}o.file.status==="error"&&F.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,T.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"users"}}).then(function(){var i=_()(a()().mark(function N(s){return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:console.log("api_response"),console.log(s);case 2:case"end":return W.stop()}},N)}));return function(N){return i.apply(this,arguments)}}())},children:(0,r.jsx)(L.ZP,{type:"primary",icon:(0,r.jsx)(Y.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(C.Z,{span:18,children:[(0,r.jsxs)(O.A.Group,{size:24,children:[(0,r.jsx)(B.Z,{name:"name",label:"Name",placeholder:"Type Your Name",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(B.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsxs)(O.A.Group,{size:24,children:[(0,r.jsx)(J.Z,{label:"Date of Birth",name:"date_of_birth",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(B.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsx)(O.A.Group,{size:24,children:(0,r.jsx)(X.Z,{name:"bio_data",label:"Biographical Info",placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})})})]})};x.default=E}}]);
